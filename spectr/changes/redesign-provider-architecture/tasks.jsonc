// Spectr Tasks File (JSONC)
//
// This file contains machine-readable task definitions for a Spectr change.
// JSONC format allows comments while maintaining JSON compatibility.
//
// Status Values:
//   - "pending"     : Task has not been started yet
//   - "in_progress" : Task is currently being worked on
//   - "completed"   : Task has been finished and verified
//
// Status Transitions:
//   pending -> in_progress -> completed
//
//   Tasks should only move forward through these states.
//   Do not skip states or move backward.
//
// Workflow:
//   1. BEFORE starting work on a task, mark it as "in_progress"
//   2. Complete the implementation for the task
//   3. Verify the work is correct and complete
//   4. IMMEDIATELY mark the task as "completed" after verification
//   5. Move to the next task and repeat
//
// IMPORTANT - Update Status Immediately:
//   - Update each task's status IMMEDIATELY after it transitions
//   - Do NOT batch status updates at the end of all work
//   - Do NOT wait until all tasks are done to update statuses
//   - This file should reflect accurate progress at any point in time
//   - Using a single edit to mark a task completed AND the next task
//     in_progress is allowed (this is a single transition, not batching)
//
// Note: This file is auto-generated by 'spectr accept'. Manual edits to
// task status are expected, but structure changes may be overwritten.
//

{
  "version": 1,
  "tasks": [
    {
      "id": "1.1",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Create `internal/initialize/providers/initializer.go` with new `Initializer` interface including:",
      "status": "completed"
    },
    {
      "id": "1.2",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Create `internal/initialize/providers/config.go` with `Config` struct containing:",
      "status": "completed"
    },
    {
      "id": "1.3",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Create `internal/initialize/providers/provider_new.go` with new minimal `Provider` interface returning `[]Initializer`",
      "status": "completed"
    },
    {
      "id": "1.4",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Create `internal/initialize/providers/registration.go` with `Registration` struct (ID, Name, Priority, Provider) and new registration API",
      "status": "completed"
    },
    {
      "id": "2.1",
      "section": "Built-in Initializers",
      "description": "Create `internal/initialize/providers/initializers/directory.go` with `DirectoryInitializer`:",
      "status": "completed"
    },
    {
      "id": "2.2",
      "section": "Built-in Initializers",
      "description": "Create `internal/initialize/providers/initializers/configfile.go` with `ConfigFileInitializer`:",
      "status": "completed"
    },
    {
      "id": "2.3",
      "section": "Built-in Initializers",
      "description": "Create `internal/initialize/providers/initializers/slashcmds.go` with `SlashCommandsInitializer`:",
      "status": "completed"
    },
    {
      "id": "2.4",
      "section": "Built-in Initializers",
      "description": "Add unit tests for `DirectoryInitializer` with `afero.MemMapFs`",
      "status": "completed"
    },
    {
      "id": "2.5",
      "section": "Built-in Initializers",
      "description": "Add unit tests for `ConfigFileInitializer` with `afero.MemMapFs` - test create and marker update scenarios",
      "status": "completed"
    },
    {
      "id": "2.6",
      "section": "Built-in Initializers",
      "description": "Add unit tests for `SlashCommandsInitializer` with `afero.MemMapFs` - test Markdown and TOML formats",
      "status": "completed"
    },
    {
      "id": "3.1",
      "section": "New Registry Implementation",
      "description": "Create `internal/initialize/providers/registry_v2.go` with new `Registry` type using `Registration` struct for metadata",
      "status": "completed"
    },
    {
      "id": "3.2",
      "section": "New Registry Implementation",
      "description": "Implement `Register(Registration)`, `Get(id)`, `All()`, `IDs()`, `Count()` methods on new registry",
      "status": "completed"
    },
    {
      "id": "3.3",
      "section": "New Registry Implementation",
      "description": "Add priority-sorted retrieval maintaining backwards-compatible behavior",
      "status": "completed"
    },
    {
      "id": "3.4",
      "section": "New Registry Implementation",
      "description": "Add duplicate ID rejection with clear error messages",
      "status": "completed"
    },
    {
      "id": "3.5",
      "section": "New Registry Implementation",
      "description": "Add unit tests for new registry: registration, retrieval, priority sorting, duplicate rejection",
      "status": "completed"
    },
    {
      "id": "4.1",
      "section": "Git Integration for Change Detection",
      "description": "Create `internal/initialize/git/detector.go` with `ChangeDetector` type",
      "status": "completed"
    },
    {
      "id": "4.2",
      "section": "Git Integration for Change Detection",
      "description": "Implement `IsGitRepo(path string) bool` function for early validation",
      "status": "completed"
    },
    {
      "id": "4.3",
      "section": "Git Integration for Change Detection",
      "description": "Implement `Snapshot() (string, error)` method to capture git working tree state (using `git stash create` or staging area comparison)",
      "status": "completed"
    },
    {
      "id": "4.4",
      "section": "Git Integration for Change Detection",
      "description": "Implement `ChangedFiles(beforeSnapshot string) ([]string, error)` method using `git diff --name-only`",
      "status": "completed"
    },
    {
      "id": "4.5",
      "section": "Git Integration for Change Detection",
      "description": "Handle edge cases: untracked files (use `git status --porcelain`), dirty working tree",
      "status": "completed"
    },
    {
      "id": "4.6",
      "section": "Git Integration for Change Detection",
      "description": "Add clear error message for non-git repos: \"spectr init requires a git repository. Run 'git init' first.\"",
      "status": "completed"
    },
    {
      "id": "4.7",
      "section": "Git Integration for Change Detection",
      "description": "Add unit tests for `ChangeDetector` mocking git commands",
      "status": "completed"
    },
    {
      "id": "5.1",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `claude.go` to new Provider interface (reference implementation) - delete old `ClaudeProvider` struct and `NewClaudeProvider()` after migration",
      "status": "completed"
    },
    {
      "id": "5.2",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `gemini.go` to new Provider interface (TOML format example) - delete old `GeminiProvider` struct and `Configure()` override after migration",
      "status": "completed"
    },
    {
      "id": "5.3",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `cursor.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.4",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `cline.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.5",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `aider.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.6",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `codex.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.7",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `costrict.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.8",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `qoder.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.9",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `codebuddy.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.10",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `qwen.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.11",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `antigravity.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.12",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `windsurf.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.13",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `kilocode.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.14",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `continue.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.15",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `crush.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "5.16",
      "section": "Migrate Providers (In-Place Replacement)",
      "description": "Migrate `opencode.go` to new Provider interface - delete old code",
      "status": "completed"
    },
    {
      "id": "6.1",
      "section": "Executor Integration",
      "description": "Create dual filesystem in `executor.go`:",
      "status": "completed"
    },
    {
      "id": "6.2",
      "section": "Executor Integration",
      "description": "Add git repo check at start of `Init()`:",
      "status": "completed"
    },
    {
      "id": "6.3",
      "section": "Executor Integration",
      "description": "Update `executor.go` to use new registry API (`Registration` based retrieval)",
      "status": "completed"
    },
    {
      "id": "6.4",
      "section": "Executor Integration",
      "description": "Implement initializer collection from selected providers",
      "status": "completed"
    },
    {
      "id": "6.5",
      "section": "Executor Integration",
      "description": "Implement initializer deduplication by `Path()` - same path = run once",
      "status": "completed"
    },
    {
      "id": "6.6",
      "section": "Executor Integration",
      "description": "Implement initializer sorting by type (guaranteed order):",
      "status": "completed"
    },
    {
      "id": "6.7",
      "section": "Executor Integration",
      "description": "Update `configureProviders()` to:",
      "status": "completed"
    },
    {
      "id": "6.8",
      "section": "Executor Integration",
      "description": "Integrate `git.ChangeDetector` for file change reporting (replace `GetFilePaths()` usage)",
      "status": "completed"
    },
    {
      "id": "6.9",
      "section": "Executor Integration",
      "description": "Update `ExecutionResult` to use git-detected changed files instead of declared paths",
      "status": "completed"
    },
    {
      "id": "6.10",
      "section": "Executor Integration",
      "description": "Handle partial failures: report which initializers failed, continue with rest",
      "status": "completed"
    },
    {
      "id": "7.1",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove old `Provider` interface (12-method version) from `provider.go`",
      "status": "completed"
    },
    {
      "id": "7.2",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove `BaseProvider` struct from `provider.go`",
      "status": "completed"
    },
    {
      "id": "7.3",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove `TemplateRenderer` interface from `provider.go` (now using `*TemplateManager` directly)",
      "status": "completed"
    },
    {
      "id": "7.4",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove `TemplateContext` and `DefaultTemplateContext()` from `provider.go` (move to config if needed)",
      "status": "completed"
    },
    {
      "id": "7.5",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Delete `helpers.go` - `EnsureDir`, `FileExists`, `UpdateFileWithMarkers` now in initializers or use `afero.Fs`",
      "status": "completed"
    },
    {
      "id": "7.6",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove old global registry functions from `registry.go` (keep only new `Registry` type)",
      "status": "completed"
    },
    {
      "id": "7.7",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Clean up `constants.go` - remove `StandardFrontmatter()`, `StandardCommandPaths()`, `PrefixedCommandPaths()` (moved to initializers)",
      "status": "completed"
    },
    {
      "id": "7.8",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove priority constants from `constants.go` (priorities now in registration calls)",
      "status": "completed"
    },
    {
      "id": "8.1",
      "section": "Test Cleanup",
      "description": "Delete `provider_test.go` (~666 lines) - old interface tests no longer applicable",
      "status": "completed"
    },
    {
      "id": "8.2",
      "section": "Test Cleanup",
      "description": "Create `provider_new_test.go` with tests for new `Provider` interface",
      "status": "completed"
    },
    {
      "id": "8.3",
      "section": "Test Cleanup",
      "description": "Add tests verifying all 17 providers return expected initializers",
      "status": "completed"
    },
    {
      "id": "8.4",
      "section": "Test Cleanup",
      "description": "Add tests verifying provider registration metadata (ID, Name, Priority)",
      "status": "completed"
    },
    {
      "id": "8.5",
      "section": "Test Cleanup",
      "description": "Delete `registry_test.go` (~212 lines) - old registry tests no longer applicable",
      "status": "completed"
    },
    {
      "id": "8.6",
      "section": "Test Cleanup",
      "description": "Create `registry_v2_test.go` with tests for new `Registry` type",
      "status": "completed"
    },
    {
      "id": "8.7",
      "section": "Test Cleanup",
      "description": "Add integration test for full initialization flow using `afero.MemMapFs`",
      "status": "completed"
    },
    {
      "id": "8.8",
      "section": "Test Cleanup",
      "description": "Add integration test verifying git diff change detection",
      "status": "completed"
    },
    {
      "id": "9.1",
      "section": "Final Verification",
      "description": "Run `go build ./...` to verify no compilation errors",
      "status": "completed"
    },
    {
      "id": "9.2",
      "section": "Final Verification",
      "description": "Run `go test ./...` to verify all tests pass",
      "status": "completed"
    },
    {
      "id": "9.3",
      "section": "Final Verification",
      "description": "Manual test: `spectr init` in non-git directory (verify early fail with clear error)",
      "status": "completed"
    },
    {
      "id": "9.4",
      "section": "Final Verification",
      "description": "Manual test: `spectr init` with Claude Code provider",
      "status": "completed"
    },
    {
      "id": "9.5",
      "section": "Final Verification",
      "description": "Manual test: `spectr init` with multiple providers (verify deduplication)",
      "status": "completed"
    },
    {
      "id": "9.6",
      "section": "Final Verification",
      "description": "Manual test: `spectr init` with Gemini provider (verify TOML format)",
      "status": "completed"
    },
    {
      "id": "9.7",
      "section": "Final Verification",
      "description": "Manual test: Provider with global path (verify globalFs usage)",
      "status": "completed"
    },
    {
      "id": "9.8",
      "section": "Final Verification",
      "description": "Verify git diff shows expected file changes after init",
      "status": "completed"
    },
    {
      "id": "9.9",
      "section": "Final Verification",
      "description": "Verify initializer ordering (directories created before files)",
      "status": "completed"
    },
    {
      "id": "9.10",
      "section": "Final Verification",
      "description": "Update CLI help text for `spectr init` if needed",
      "status": "completed"
    }
  ]
}