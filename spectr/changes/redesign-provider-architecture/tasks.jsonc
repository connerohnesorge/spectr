// Spectr Tasks File (JSONC)
//
// This file contains machine-readable task definitions for a Spectr change.
// JSONC format allows comments while maintaining JSON compatibility.
//
// Status Values:
//   - "pending"     : Task has not been started yet
//   - "in_progress" : Task is currently being worked on
//   - "completed"   : Task has been finished and verified
//
// Status Transitions:
//   pending -> in_progress -> completed
//
//   Tasks should only move forward through these states.
//   Do not skip states or move backward.
//
// Workflow:
//   1. BEFORE starting work on a task, mark it as "in_progress"
//   2. Complete the implementation for the task
//   3. Verify the work is correct and complete
//   4. IMMEDIATELY mark the task as "completed" after verification
//   5. Move to the next task and repeat
//
// IMPORTANT - Update Status Immediately:
//   - Update each task's status IMMEDIATELY after it transitions
//   - Do NOT batch status updates at the end of all work
//   - Do NOT wait until all tasks are done to update statuses
//   - This file should reflect accurate progress at any point in time
//   - Using a single edit to mark a task completed AND the next task
//     in_progress is allowed (this is a single transition, not batching)
//
// Note: This file is auto-generated by 'spectr accept'. Manual edits to
// task status are expected, but structure changes may be overwritten.
//

{
  "version": 1,
  "tasks": [
    {
      "id": "0.1",
      "section": "Domain Package: Shared Types to Break Import Cycles",
      "description": "Create `internal/domain/template.go` with:",
      "status": "pending"
    },
    {
      "id": "0.2",
      "section": "Domain Package: Shared Types to Break Import Cycles",
      "description": "Create `internal/domain/slashcmd.go` with:",
      "status": "pending"
    },
    {
      "id": "0.3",
      "section": "Domain Package: Shared Types to Break Import Cycles",
      "description": "Add unit tests for `internal/domain/template_test.go`:",
      "status": "pending"
    },
    {
      "id": "0.4",
      "section": "Domain Package: Shared Types to Break Import Cycles",
      "description": "Add unit tests for `internal/domain/slashcmd_test.go`:",
      "status": "pending"
    },
    {
      "id": "1.1",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Create `internal/initialize/providers/initializer.go` with new `Initializer` interface including:",
      "status": "pending"
    },
    {
      "id": "1.2",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Create `internal/initialize/providers/result.go` with `InitResult` struct:",
      "status": "pending"
    },
    {
      "id": "1.3",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Create `internal/initialize/providers/config.go` with `Config` struct containing:",
      "status": "pending"
    },
    {
      "id": "1.4",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Rewrite `internal/initialize/providers/provider.go` with new minimal `Provider` interface returning `[]Initializer` (replace old interface in-place)",
      "status": "pending"
    },
    {
      "id": "1.5",
      "section": "Foundation: Core Interfaces and Types",
      "description": "Create `internal/initialize/providers/registration.go` with:",
      "status": "pending"
    },
    {
      "id": "2.1",
      "section": "Type-Safe Template System",
      "description": "Update `internal/initialize/templates.go` to import and use `domain.TemplateRef` and `domain.TemplateContext`",
      "status": "pending"
    },
    {
      "id": "2.2",
      "section": "Type-Safe Template System",
      "description": "Add type-safe accessor methods to `TemplateManager` returning `domain.TemplateRef`:",
      "status": "pending"
    },
    {
      "id": "2.3",
      "section": "Type-Safe Template System",
      "description": "Add `SlashCommand(cmd domain.SlashCommand) domain.TemplateRef` method to `TemplateManager`",
      "status": "pending"
    },
    {
      "id": "2.4",
      "section": "Type-Safe Template System",
      "description": "Add unit tests verifying all accessor methods return valid `domain.TemplateRef`",
      "status": "pending"
    },
    {
      "id": "2.5",
      "section": "Type-Safe Template System",
      "description": "Update any existing code that uses TemplateContext to use `domain.TemplateContext`",
      "status": "pending"
    },
    {
      "id": "3.1",
      "section": "Built-in Initializers",
      "description": "Create `internal/initialize/providers/initializers/directory.go` with `DirectoryInitializer`:",
      "status": "pending"
    },
    {
      "id": "3.2",
      "section": "Built-in Initializers",
      "description": "Create `internal/initialize/providers/initializers/configfile.go` with `ConfigFileInitializer`:",
      "status": "pending"
    },
    {
      "id": "3.3",
      "section": "Built-in Initializers",
      "description": "Create `internal/initialize/providers/initializers/slashcmds.go` with `SlashCommandsInitializer`:",
      "status": "pending"
    },
    {
      "id": "3.4",
      "section": "Built-in Initializers",
      "description": "Add unit tests for `DirectoryInitializer` with `afero.MemMapFs`",
      "status": "pending"
    },
    {
      "id": "3.5",
      "section": "Built-in Initializers",
      "description": "Add unit tests for `ConfigFileInitializer` with `afero.MemMapFs` - test create and marker update scenarios",
      "status": "pending"
    },
    {
      "id": "3.6",
      "section": "Built-in Initializers",
      "description": "Add unit tests for `SlashCommandsInitializer` with `afero.MemMapFs` - test Markdown and TOML formats",
      "status": "pending"
    },
    {
      "id": "4.1",
      "section": "New Registry Implementation (No init())",
      "description": "Rewrite `internal/initialize/providers/registry.go` with new `Registry` type using `Registration` struct for metadata",
      "status": "pending"
    },
    {
      "id": "4.2",
      "section": "New Registry Implementation (No init())",
      "description": "Implement `RegisterProvider(reg Registration) error` with validation (returns error, not panic)",
      "status": "pending"
    },
    {
      "id": "4.3",
      "section": "New Registry Implementation (No init())",
      "description": "Implement `Get(id)`, `All()`, `IDs()`, `Count()` methods on registry",
      "status": "pending"
    },
    {
      "id": "4.4",
      "section": "New Registry Implementation (No init())",
      "description": "Add priority-sorted retrieval maintaining backwards-compatible behavior",
      "status": "pending"
    },
    {
      "id": "4.5",
      "section": "New Registry Implementation (No init())",
      "description": "Add duplicate ID rejection with clear error messages",
      "status": "pending"
    },
    {
      "id": "4.6",
      "section": "New Registry Implementation (No init())",
      "description": "Create `RegisterAllProviders() error` function that explicitly registers all 17 providers in one place",
      "status": "pending"
    },
    {
      "id": "4.7",
      "section": "New Registry Implementation (No init())",
      "description": "Rewrite `registry_test.go` with tests for new registry: registration, retrieval, priority sorting, duplicate rejection",
      "status": "pending"
    },
    {
      "id": "4.8",
      "section": "New Registry Implementation (No init())",
      "description": "Add unit tests for `RegisterAllProviders()` verifying all providers are registered correctly",
      "status": "pending"
    },
    {
      "id": "5.1",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `claude.go` to new Provider interface (reference implementation) - delete old struct, `NewClaudeProvider()`, and `init()`",
      "status": "pending"
    },
    {
      "id": "5.2",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `gemini.go` to new Provider interface (TOML format example) - delete old struct, `Configure()` override, and `init()`",
      "status": "pending"
    },
    {
      "id": "5.3",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `cursor.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.4",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `cline.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.5",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `aider.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.6",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `codex.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.7",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `costrict.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.8",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `qoder.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.9",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `codebuddy.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.10",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `qwen.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.11",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `antigravity.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.12",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `windsurf.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.13",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `kilocode.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.14",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `continue.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.15",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `crush.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "5.16",
      "section": "Migrate Providers (In-Place Replacement, No init())",
      "description": "Migrate `opencode.go` to new Provider interface - delete old code and `init()`",
      "status": "pending"
    },
    {
      "id": "6.1",
      "section": "Executor Integration",
      "description": "Update `cmd/root.go` or application entry point to call `providers.RegisterAllProviders()` at startup with error handling",
      "status": "pending"
    },
    {
      "id": "6.2",
      "section": "Executor Integration",
      "description": "Create dual filesystem in `executor.go`:",
      "status": "pending"
    },
    {
      "id": "6.3",
      "section": "Executor Integration",
      "description": "Update `executor.go` to use new registry API (`Registration` based retrieval)",
      "status": "pending"
    },
    {
      "id": "6.4",
      "section": "Executor Integration",
      "description": "Implement initializer collection from selected providers",
      "status": "pending"
    },
    {
      "id": "6.5",
      "section": "Executor Integration",
      "description": "Implement initializer deduplication by `Path()` - same path = run once",
      "status": "pending"
    },
    {
      "id": "6.6",
      "section": "Executor Integration",
      "description": "Implement initializer sorting by type (guaranteed order):",
      "status": "pending"
    },
    {
      "id": "6.7",
      "section": "Executor Integration",
      "description": "Update `configureProviders()` to:",
      "status": "pending"
    },
    {
      "id": "6.8",
      "section": "Executor Integration",
      "description": "Aggregate `InitResult` values into `ExecutionResult`",
      "status": "pending"
    },
    {
      "id": "6.9",
      "section": "Executor Integration",
      "description": "Handle partial failures: report which initializers failed, continue with rest",
      "status": "pending"
    },
    {
      "id": "7.1",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove old `Provider` interface (12-method version) from `provider.go`",
      "status": "pending"
    },
    {
      "id": "7.2",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove `BaseProvider` struct from `provider.go`",
      "status": "pending"
    },
    {
      "id": "7.3",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove `TemplateRenderer` interface from `provider.go` (now using `*TemplateManager` directly)",
      "status": "pending"
    },
    {
      "id": "7.4",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove `TemplateContext` and `DefaultTemplateContext()` from `provider.go` (now in `internal/domain`)",
      "status": "pending"
    },
    {
      "id": "7.5",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Delete `helpers.go` - `EnsureDir`, `FileExists`, `UpdateFileWithMarkers` now in initializers or use `afero.Fs`",
      "status": "pending"
    },
    {
      "id": "7.6",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove old global registry functions from `registry.go` (keep only new `Registry` type)",
      "status": "pending"
    },
    {
      "id": "7.7",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Clean up `constants.go` - remove `StandardFrontmatter()`, `StandardCommandPaths()`, `PrefixedCommandPaths()` (moved to initializers)",
      "status": "pending"
    },
    {
      "id": "7.8",
      "section": "Remove Old Provider Code (In-Place Cleanup)",
      "description": "Remove priority constants from `constants.go` (priorities now in registration calls)",
      "status": "pending"
    },
    {
      "id": "8.1",
      "section": "Test Cleanup",
      "description": "Rewrite `provider_test.go` with tests for new `Provider` interface (replace old tests, not new file)",
      "status": "pending"
    },
    {
      "id": "8.2",
      "section": "Test Cleanup",
      "description": "Add tests verifying all 17 providers return expected initializers",
      "status": "pending"
    },
    {
      "id": "8.3",
      "section": "Test Cleanup",
      "description": "Add tests verifying provider registration metadata (ID, Name, Priority)",
      "status": "pending"
    },
    {
      "id": "8.4",
      "section": "Test Cleanup",
      "description": "Rewrite `registry_test.go` with tests for new `Registry` type (replace old tests, not new file)",
      "status": "pending"
    },
    {
      "id": "8.5",
      "section": "Test Cleanup",
      "description": "Add integration test for full initialization flow using `afero.MemMapFs`",
      "status": "pending"
    },
    {
      "id": "8.6",
      "section": "Test Cleanup",
      "description": "Add integration test verifying InitResult accumulation",
      "status": "pending"
    },
    {
      "id": "9.1",
      "section": "Final Verification",
      "description": "Run `go build ./...` to verify no compilation errors",
      "status": "pending"
    },
    {
      "id": "9.2",
      "section": "Final Verification",
      "description": "Run `go test ./...` to verify all tests pass",
      "status": "pending"
    },
    {
      "id": "9.3",
      "section": "Final Verification",
      "description": "Manual test: `spectr init` with Claude Code provider",
      "status": "pending"
    },
    {
      "id": "9.4",
      "section": "Final Verification",
      "description": "Manual test: `spectr init` with multiple providers (verify deduplication)",
      "status": "pending"
    },
    {
      "id": "9.5",
      "section": "Final Verification",
      "description": "Manual test: `spectr init` with Gemini provider (verify TOML format)",
      "status": "pending"
    },
    {
      "id": "9.6",
      "section": "Final Verification",
      "description": "Manual test: Provider with global path (verify globalFs usage)",
      "status": "pending"
    },
    {
      "id": "9.7",
      "section": "Final Verification",
      "description": "Verify InitResult reports correct created/updated files",
      "status": "pending"
    },
    {
      "id": "9.8",
      "section": "Final Verification",
      "description": "Verify initializer ordering (directories created before files)",
      "status": "pending"
    },
    {
      "id": "9.9",
      "section": "Final Verification",
      "description": "Update CLI help text for `spectr init` if needed",
      "status": "pending"
    }
  ]
}